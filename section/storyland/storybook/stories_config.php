<?php
/**
 * Story Configuration System
 * Manages all stories in the storybook system
 */

// Story configuration array
$stories = [
    'three_little_pigs' => [
        'id' => 'three_little_pigs',
        'title' => 'The Three Little Pigs',
        'description' => 'A classic tale about three pigs and a big bad wolf',
        'age_group' => '2-3',
        'cover_image' => 'storybook/three_little_pigs/cover.jpg',
        'pdf_file' => 'storybook/three_little_pigs/story.pdf',
        'audio_file' => 'storybook/three_little_pigs/audio.mp3',
        'total_pages' => 29,
        'pages' => [
            [
                'page_number' => 1,
                'text' => 'The Three Little Pigs.',
                'audio_start' => 0,
                'audio_end' => 1.2
            ],
            [
                'page_number' => 2,
                'text' => 'Once Upon a time,there lived three little pigs',
                'audio_start' => 3,
                'audio_end' => 5.7
            ],
            [
                'page_number' => 3,
                'text' => 'One day,they decided to leave home and build houses of their own.',
                'audio_start' => 5.9,
                'audio_end' => 9.2
            ],
            [
                'page_number' => 4,
                'text' => 'The first little pig thought that straw would make a good house.',
                'audio_start' => 10,
                'audio_end' => 14
            ],
            [
                'page_number' => 5,
                'text' => 'He built the house very quickly and he was very pleased with it.',
                'audio_start' => 14,
                'audio_end' => 17
            ],
            [
                'page_number' => 6,
                'text' => 'The second little pig thought that sticks would make a fine house.',
                'audio_start' => 17,
                'audio_end' => 21
            ],
            [
                'page_number' => 7,
                'text' => 'He built the house very quickly and he was very pleased with it..',
                'audio_start' => 21,
                'audio_end' => 25
            ],
            [
                'page_number' => 8,
                'text' => 'The third little pig thought that bricks would make a strong house.',
                'audio_start' => 25,
                'audio_end' => 28.5
            ],
            [
                'page_number' => 9,
                'text' => 'It took him a long time to build the house but he was very pleased with it.',
                'audio_start' => 28.8,
                'audio_end' => 32.8
            ],
            [
                'page_number' => 10,
                'text' => 'One day, a big bad wolf came along.',
                'audio_start' => 33,
                'audio_end' => 35
            ],
            [
                'page_number' => 11,
                'text' => 'He saw the first little pig in his house of straw.',
                'audio_start' => 35,
                'audio_end' => 38
            ],
            [
                'page_number' => 12,
                'text' => 'Little pig, little pig, let me come in, he snarled.Not by the hair on my chinny, chin, chin! cried the first little pig.',
                'audio_start' => 38,
                'audio_end' => 46.3
            ],
            [
                'page_number' => 13,
                'text' => 'Then I’ll huff and I’ll puff and I’ll blow your house down! growled the big bad wolf.',
                'audio_start' => 46.7,
                'audio_end' => 51.2
            ],
            [
                'page_number' => 14,
                'text' => 'So he huffed and he puffed and he blew the house down.',
                'audio_start' => 51.3,
                'audio_end' => 55
            ],
            [
                'page_number' => 15,
                'text' => 'The first little pig escaped and ran to join his brother in the house made of sticks',
                'audio_start' => 55.1,
                'audio_end' => 61
            ],
            [
                'page_number' => 16,
                'text' => 'The big bad wolf followed the little pig to the house made of sticks.',
                'audio_start' => 61.5,
                'audio_end' => 65
            ],
            [
                'page_number' => 17,
                'text' => 'Little pig, little pig, let me come in,he snarled.Not by the hair on my chinny, chin, chin!cried the second little pig.',
                'audio_start' => 65.1,
                'audio_end' => 73.5
            ],
            [
                'page_number' => 18,
                'text' => 'Then I’ll huff and I’ll puff and I’ll blow your house down! growled the big bad wolf..',
                'audio_start' => 73.6,
                'audio_end' => 78.2
            ],
            [
                'page_number' => 19,
                'text' => 'So he huffed and he puffed and he blew the house down!',
                'audio_start' => 78.3,
                'audio_end' => 81.9
            ],
            [
                'page_number' => 20,
                'text' => 'The two little pigs escaped and ran to join their brother in the house made of bricks',
                'audio_start' => 82.1,
                'audio_end' => 86.5
            ],
            [
                'page_number' => 21,
                'text' => 'The big bad wolf followed the pigs to the house made of bricks.',
                'audio_start' => 86.7,
                'audio_end' => 90.1
            ],
            [
                'page_number' => 22,
                'text' => 'Little pig, little pig, let me come in,he snarled.Not by the hair on my chinny, chin, chin!cried the third little pig.',
                'audio_start' => 90.2,
                'audio_end' => 97.5
            ],
            [
                'page_number' => 23,
                'text' => 'Then I’ll huff and I’ll puff and I’ll blow your house down” growled the big bad wolf.',
                'audio_start' => 97.7,
                'audio_end' => 102.5
            ],
            [
                'page_number' => 24,
                'text' => 'He huffed and he puffed, but the house was too strong. He could not blow it down!',
                'audio_start' => 102.6,
                'audio_end' => 107.2
            ],
            [
                'page_number' => 25,
                'text' => 'This made the big bad wolf very angry.He climbed onto the roof of the house so he could crawl down the chimney.',
                'audio_start' => 107.4,
                'audio_end' => 114.8
            ],
            [
                'page_number' => 26,
                'text' => 'The big bad wolf was in for a big surprise!',
                'audio_start' => 115,
                'audio_end' => 117.2
            ],
            [
                'page_number' => 27,
                'text' => 'The third little pig had been cooking a big pot of stew and SPLASH! The wolf fell right into the pot!',
                'audio_start' => 117.4,
                'audio_end' => 124
            ],
            [
                'page_number' => 28,
                'text' => 'The wolf was very shocked. He jumped out of the pot and ran straight out of the house. He never came back again.',
                'audio_start' => 124.2,
                'audio_end' => 130.2
            ],
            [
                'page_number' =>29,
                'text' => 'The little pigs lived happily ever after in the house made of bricks',
                'audio_start' => 130.4,
                'audio_end' => 134.5
            ],
            
            
        ]
    ],
    'the_ugly_duckling' => [
        'id' => 'the_ugly_duckling',
        'title' => 'The Ugly Duckling',
        'description' => 'A beautiful tale about accepting differences and finding your place',
        'age_group' => '2-3',
        'cover_image' => 'storybook/the_ugly_duckling/cover2.jpg',
        'pdf_file' => 'storybook/the_ugly_duckling/story2.pdf',
        'audio_file' => 'storybook/the_ugly_duckling/audio2.mp3',
        'total_pages' => 22,
        'pages' => [
            [
                'page_number' => 1,
                'text' => 'The Ugly Duckling',
                'audio_start' => 0,
                'audio_end' => 2
            ],
            [
                'page_number' => 2,
                'text' => 'Once upon a time a mother duck was waiting for her eggs to hatch',
                'audio_start' => 2.5,
                'audio_end' =>7
            ],
            [
                'page_number' => 3,
                'text' => 'The eggs were white, all except one.',
                'audio_start' => 7,
                'audio_end' => 9
            ],
            [
                'page_number' => 4,
                'text' => 'Soon the eggs began to hatch, and the duck became the proud mother of 5 little ducklings',
                'audio_start' => 9.5,
                'audio_end' => 19
            ],
            [
                'page_number' => 5,
                'text' => 'But one egg remained...',
                'audio_start' => 19.5,
                'audio_end' => 22
            ],
            [
                'page_number' => 6,
                'text' => 'Finally the last duckling hatched.',
                'audio_start' => 22,
                'audio_end' => 25
            ],
            [
                'page_number' => 7,
                'text' => 'But he was different from the others.',
                'audio_start' => 25,
                'audio_end' => 28
            ],
            [
                'page_number' => 8,
                'text' => 'Why are you different?',
                'audio_start' => 28,
                'audio_end' => 30.1
            ],
            [
                'page_number' => 9,
                'text' => 'Nobody loves me because I am different.',
                'audio_start' => 30.5,
                'audio_end' => 34
            ],
            [
                'page_number' => 10,
                'text' => 'The ugly duckling left home to look for a place he belonged.',
                'audio_start' => 35,
                'audio_end' => 38.9
            ],
            [
                'page_number' => 11,
                'text' => 'He came across some other birds, but they did not want to be friends with such an odd looking duckling.',
                'audio_start' => 39.2,
                'audio_end' => 45.8
            ],
            [
                'page_number' => 12,
                'text' => 'You look strange You’re ugly.',
                'audio_start' => 46,
                'audio_end' => 49.5
            ],
            [
                'page_number' => 13,
                'text' => 'The duckling was very sad and waddled away.',
                'audio_start' => 50,
                'audio_end' => 53
            ],
            [
                'page_number' => 14,
                'text' => 'An old woman found the duckling and put him in her hutch.',
                'audio_start' => 53.5,
                'audio_end' => 57.5
            ],
            [
                'page_number' => 15,
                'text' => 'The woman’s hen warned the duckling she planned to eat him.',
                'audio_start' => 58,
                'audio_end' => 63
            ],
            [
                'page_number' => 16,
                'text' => 'The poor duckling escaped and hid in some reeds.',
                'audio_start' => 63.5,
                'audio_end' => 66.8
            ],
            [
                'page_number' => 17,
                'text' => 'He saw some beautiful birds fly above and wished he was like them..',
                'audio_start' => 67,
                'audio_end' => 71.5
            ],
            [
                'page_number' => 18,
                'text' => 'Winter came and the duckling was cold.',
                'audio_start' => 72,
                'audio_end' => 75
            ],
            [
                'page_number' => 19,
                'text' => 'But a farmer found him and kept him safe until spring..',
                'audio_start' => 75.3,
                'audio_end' => 78.7
            ],
            [
                'page_number' => 20,
                'text' => 'When spring came, the farmer took the duckling to a pond and released him.Something wonderful had happened....',
                'audio_start' => 79,
                'audio_end' => 86
            ],
            [
                'page_number' => 21,
                'text' => '..the duckling had grown into a beautiful swan!.',
                'audio_start' => 86.5,
                'audio_end' => 89.7
            ],
            [
                'page_number' => 22,
                'text' => 'He soon made lots of new friends and was the most beautiful swan of them all.',
                'audio_start' => 90,
                'audio_end' => 96
            ],
           
        ]
    ],
    'the_dove_and_the_ant' => [
        'id' => 'the_dove_and_the_ant',
        'title' => 'The Dove and the Ant',
        'description' => 'A heartwarming story about kindness and helping others',
        'age_group' => '2-3',
        'cover_image' => 'storybook/the_dove_and_the_ant/cover3.jpg',
        'pdf_file' => 'storybook/the_dove_and_the_ant/storyD.pdf',
        'audio_file' => 'storybook/the_dove_and_the_ant/audio3.mp3',
        'total_pages' => 14,
        'pages' => [
            [
                'page_number' => 1,
                'text' => 'The Dove and The Ant',
                'audio_start' => 0,
                'audio_end' => 2
            ],
            [
                'page_number' => 2,
                'text' => 'One day an ant went down to the river to get a drink.',
                'audio_start' => 2.5,
                'audio_end' => 6
            ],
            [
                'page_number' => 3,
                'text' => 'He was so thirsty that he stretched his head over the bank to take the biggest gulp he could.',
                'audio_start' => 6.5,
                'audio_end' => 13
            ],
            [
                'page_number' => 4,
                'text' => 'Suddenly, he fell in.',
                'audio_start' => 15,
                'audio_end' => 17
            ],
            [
                'page_number' => 5,
                'text' => 'Soon, he was swept far into the river. He feared that there was no hope',
                'audio_start' => 18,
                'audio_end' => 24
            ],
             [
                'page_number' => 6,
                'text' => 'Up above, a dove saw the poor ant in the river.',
                'audio_start' =>25.8 ,
                'audio_end' => 31
            ],
             [
                'page_number' => 7,
                'text' => 'She swept down, picked him up and saved him.',
                'audio_start' => 32,
                'audio_end' => 36
            ],
             [
                'page_number' => 8,
                'text' => 'Thank you, said the ant. You saved my life.',
                'audio_start' => 37,
                'audio_end' => 42
            ],
             [
                'page_number' => 9,
                'text' => 'Many days later, the ant saw a man who was trying to hurt the dove',
                'audio_start' => 42.5,
                'audio_end' => 48
            ],
             [
                'page_number' => 10,
                'text' => 'The ant hurried over to the man and bit him on the foot.',
                'audio_start' => 48.5,
                'audio_end' => 52
            ],
             [
                'page_number' => 11,
                'text' => 'The man screamed and hopped up and down on his good foot',
                'audio_start' => 52.2,
                'audio_end' => 57
            ],
             [
                'page_number' => 12,
                'text' => 'The dove took this chance to fly away.',
                'audio_start' => 59,
                'audio_end' =>62 
            ],
             [
                'page_number' => 13,
                'text' => 'From above, the ant heard, “Thank you.You saved my life.',
                'audio_start' => 63,
                'audio_end' => 69
            ],
             [
                'page_number' => 14,
                'text' => 'Moral: Little friends can turn out to be BIG friends',
                'audio_start' =>69.2 ,
                'audio_end' => 75
            ],
        ]
    ],
    'the_hat_seller' => [
        'id' => 'the_hat_seller',
        'title' => 'The Hat Seller',
        'description' => 'A clever tale about a cap seller who outsmarts a band of mischievous monkeys',
        'age_group' => '4',
        'cover_image' => 'storybook/the_hat_seller/cover4.jpg',
        'pdf_file' => 'storybook/the_hat_seller/story4.pdf',
        'audio_file' => 'storybook/the_hat_seller/audio4.mp3',
        'total_pages' => 19,
        'pages' => [
            [
                'page_number' => 1,
                'text' => 'The hat seller',
                'audio_start' => 0,
                'audio_end' => 1.5
            ],
            [
                'page_number' =>2,
                'text' => 'One day, a hat seller was travelling to a village to sell his hats',
                'audio_start' => 2,
                'audio_end' => 6.5
            ],
            [
                'page_number' => 3,
                'text' => 'After walking for a long time, he got tired.',
                'audio_start' => 7,
                'audio_end' => 11
            ],
            [
                'page_number' => 4,
                'text' => 'So he sat under a tree to rest',
                'audio_start' => 12,
                'audio_end' => 15.5
            ],
            [
                'page_number' => 5,
                'text' => 'He was so tired that he quickly fell asleep',
                'audio_start' => 16,
                'audio_end' => 20.5
            ],
            [
                'page_number' => 6,
                'text' => 'While he slept, a group of monkeys looked down on him from the tree.',
                'audio_start' => 20.6,
                'audio_end' => 25.5
            ],
            [
                'page_number' => 7,
                'text' => 'They climbed down the tree to get a closer look.',
                'audio_start' => 26,
                'audio_end' => 30
            ],
            [
                'page_number' => 8,
                'text' => 'They opened his bag and looked through it. They were excited to find many hats of different colors, just their size',
                'audio_start' => 30.3,
                'audio_end' => 39.5
            ],
            [
                'page_number' => 9,
                'text' => 'Soon, each monkey was wearing one of the hats',
                'audio_start' => 40,
                'audio_end' => 44.5
            ],
            [
                'page_number' => 10,
                'text' => 'The monkeys danced merrily wearing hats of red, blue, green,yellow, orange, purple and pink',
                'audio_start' => 45,
                'audio_end' => 54
            ],
            [
                'page_number' => 11,
                'text' => 'Suddenly, the hat seller rolled over in his sleep and all the monkeys ran up the tree',
                'audio_start' => 55,
                'audio_end' => 60
            ],
            [
                'page_number' => 12,
                'text' => 'When he woke up a few moments later,the monkeys watched and waited',
                'audio_start' => 61,
                'audio_end' => 66.5
            ],
            [
                'page_number' => 13,
                'text' => 'The hat seller checked his bag. He was very sad to find it empty. All his hats were gone.',
                'audio_start' => 67,
                'audio_end' => 75
            ],
            [
                'page_number' => 14,
                'text' => 'Then, he looked up and saw the monkeys wearing his hats!He was surprised at first. But then he grew angry',
                'audio_start' => 76,
                'audio_end' => 84.5 
            ],
            [
                'page_number' => 15,
                'text' => 'He thought hard about how to get the hats back from the monkeys.',
                'audio_start' => 85,
                'audio_end' => 89.5
            ],
            [
                'page_number' => 16,
                'text' => 'Then, he took off his own hat and threw it right at the monkeys',
                'audio_start' => 90.5,
                'audio_end' => 95
            ],
            [
                'page_number' => 17,
                'text' => 'The monkeys thought the hat seller was trying to hit them, and they were angry',
                'audio_start' => 96,
                'audio_end' => 102
            ],
            [
                'page_number' => 18,
                'text' => 'So, the monkeys took off the hats they were wearing and threw them at the hat seller one by one',
                'audio_start' => 102.5,
                'audio_end' => 108
            ],
            [
                'page_number' => 19,
                'text' => 'The hat seller collected all his hats and put them into his bag.The monkeys looked at the hat seller in wonder and he walked off to sell his hats,laughing as he went',
                'audio_start' => 108.5,
                'audio_end' => 120
            ],
       ]  
    ],
    'jack_and_the_beanstalk' => [
        'id' => 'jack_and_the_beanstalk',
        'title' => 'Jack And The Beanstalk',
        'description' => 'A magical adventure of Jack who climbs a giant beanstalk and finds courage, riches, and wonder',
        'age_group' => '4',
        'cover_image' => 'storybook/jack_and_the_beanstalk/cover5.jpeg',
        'pdf_file' => 'storybook/jack_and_the_beanstalk/story5.pdf',
        'audio_file' => 'storybook/jack_and_the_beanstalk/audio5.mp3',
        'total_pages' => 24,
        'pages' => [
            [
                'page_number' => 1,
                'text' => 'jack and the beanstalk',
                'audio_start' => 0,
                'audio_end' => 1.5
            ],
            [
                'page_number' => 2,
                'text' => 'Once upon a time there was a boy called Jack',
                'audio_start' => 1.6,
                'audio_end' => 5.5
            ],
            [
                'page_number' => 3,
                'text' => 'Jack lived in a cottage with his mother.They were very poor and their most valuable possession was a cow',
                'audio_start' => 5.9,
                'audio_end' => 13.8
            ],
            [
                'page_number' => 4,
                'text' => 'One day, Jack’s mother asked him to take the cow to market to sell',
                'audio_start' => 13.9,
                'audio_end' => 18.5
            ],
            [
                'page_number' => 5,
                'text' => 'On the way, Jack met a man who gave him some magic beans in exchange for the cow.',
                'audio_start' => 18.6,
                'audio_end' => 24.9
            ],
            [
                'page_number' => 6,
                'text' => 'When Jack came home with the beans his mother was angry. She threw the beans out of the window and sent him to bed',
                'audio_start' => 25,
                'audio_end' => 33.5
            ],
            [
                'page_number' => 7,
                'text' => 'The next morning, Jack looked out of the window. A giant beanstalk had grown in the garden',
                'audio_start' => 33.9,
                'audio_end' => 40.7
            ],
            [
                'page_number' => 8,
                'text' => 'Jack decided to climb the beanstalk. It was so tall it went right up to the sky and through the clouds.',
                'audio_start' => 40.9,
                'audio_end' => 47.4
            ],
            [
                'page_number' => 9,
                'text' => 'When Jack finally reached the top, he saw an enormous castle',
                'audio_start' => 47.5,
                'audio_end' => 52.1
            ],
            [
                'page_number' => 10,
                'text' => 'Jack decided to go inside; all the furniture was huge',
                'audio_start' => 52.3,
                'audio_end' => 56
            ],
            [
                'page_number' => 11,
                'text' => 'Suddenly, Jack heard a loud noise.He ran into a cupboard to hide.',
                'audio_start' => 56.3,
                'audio_end' => 60.6
            ],
            [
                'page_number' => 12,
                'text' => 'An enormous giant came into the room.“Fee, Fi, Fo, Fum, I smell the blood of an Englishman!” he bellowed.',
                'audio_start' => 60.7,
                'audio_end' => 70.3
            ],
            [
                'page_number' => 13,
                'text' => 'The giant sat down at the table. On the table was a hen and a golden harp',
                'audio_start' => 70.4,
                'audio_end' => 75.8
            ],
            [
                'page_number' => 14,
                'text' => '“Lay!” said the giant.The hen laid an egg; it was made out of solid gold.',
                'audio_start' => 76,
                'audio_end' => 81.8
            ],
            [
                'page_number' => 15,
                'text' => 'Sing said the giant.The harp sang; the giant fell asleep',
                'audio_start' => 82,
                'audio_end' => 86.8
            ],
            [
                'page_number' => 16,
                'text' => 'Jack jumped out of the cupboard and took the hen and the harp',
                'audio_start' => 86.8,
                'audio_end' => 90.8
            ],
            [
                'page_number' => 17,
                'text' => 'As Jack ran the harp cried, “Help master!”',
                'audio_start' => 90.9,
                'audio_end' => 94.9
            ],
            [
                'page_number' => 18,
                'text' => 'The giant woke up and called, “Fee, Fi, Fo, Fum, I smell the blood of an Englishman!”He chased Jack to the top of the beanstalk.',
                'audio_start' => 95,
                'audio_end' => 105.4
            ],
            [
                'page_number' => 19,
                'text' => 'Jack climbed down the beanstalk and the giant followed him.',
                'audio_start' => 105.5,
                'audio_end' => 108.8
            ],
            [
                'page_number' => 20,
                'text' => 'As Jack got to the bottom of the beanstalk he shouted,Help!',
                'audio_start' => 108.9,
                'audio_end' => 113.7
            ],
            [
                'page_number' => 21,
                'text' => 'Jack’s mother came out with an axe.She used it to chop the bottom of the beanstalk',
                'audio_start' => 113.8,
                'audio_end' => 119
            ],
            [
                'page_number' => 22,
                'text' => 'The giant fell and crashed to the ground.He was never seen again.',
                'audio_start' => 119.5,
                'audio_end' => 124
            ],
            [
                'page_number' => 23,
                'text' => 'With the golden eggs and the magic harp, Jack and his mother lived happily ever after.',
                'audio_start' => 124.5,
                'audio_end' => 131
            ],
            [
                'page_number' => 24,
                'text' => 'The End.',
                'audio_start' => 131.5,
                'audio_end' => 134
            ],
        ] 
    ],
    'snow_white' => [
        'id' => 'snow_white',
        'title' => 'Snow White',
        'description' => 'A classic fairy tale of Snow White, seven kind dwarfs, and the triumph of love over envy',
        'age_group' => '4',
        'cover_image' => 'storybook/snow_white/cover6.jpg',
        'pdf_file' => 'storybook/snow_white/story6.pdf',
        'audio_file' => 'storybook/snow_white/audio6.mp3',
        'total_pages' => 12,
        'pages' => [
            [
                'page_number' => 1,
                'text' => 'snow white',
                'audio_start' => 0,
                'audio_end' => 1
            ],
             [
                'page_number' => 2,
                'text' => 'Snow White was kind and very pretty',
                'audio_start' => 1.5,
                'audio_end' => 4.8
            ],
             [
                'page_number' => 3,
                'text' => 'The queen was jealous of Snow White.',
                'audio_start' => 4.9,
                'audio_end' => 7.5
            ],
             [
                'page_number' => 4,
                'text' => 'Snow White ran into the forest.',
                'audio_start' => 7.5,
                'audio_end' => 9.2
            ],
             [
                'page_number' => 5,
                'text' => 'She found a tiny house in the woods',
                'audio_start' => 9.4,
                'audio_end' => 11.4
            ],
             [
                'page_number' => 6,
                'text' => 'Seven little dwarfs lived there.',
                'audio_start' => 11.4,
                'audio_end' => 13.5
            ],
             [
                'page_number' => 7,
                'text' => 'Snow White was happy with her new friends.',
                'audio_start' => 13.7,
                'audio_end' => 16
            ],
             [
                'page_number' => 8,
                'text' => 'The queen gave Snow White a red apple',
                'audio_start' => 16.2,
                'audio_end' => 18.5
            ],
             [
                'page_number' => 9,
                'text' => 'She slept for a long, long time.',
                'audio_start' => 18.6,
                'audio_end' => 20.5
            ],
             [
                'page_number' => 10,
                'text' => 'A prince came and saw Snow White.',
                'audio_start' => 20.8,
                'audio_end' => 23.5
            ],
             [
                'page_number' => 11,
                'text' => 'Snow White opened her eyes',
                'audio_start' => 24,
                'audio_end' => 25.4
            ],
             [
                'page_number' => 12,
                'text' => 'They lived happily ever after.',
                'audio_start' => 25.5,
                'audio_end' => 27.5
            ],
        ]
    ],
    'rapunzel' => [
        'id' => 'rapunzel',
        'title' => 'Rapunzel',
        'description' => 'The story of Rapunzel, whose enchanted hair becomes the key to her rescue.',
        'age_group' => '5',
        'cover_image' => 'storybook/rapunzel/cover7.jpeg',
        'pdf_file' => 'storybook/rapunzel/story7.pdf',
        'audio_file' => 'storybook/rapunzel/audio7.mp3',
        'total_pages' => 17,
        'pages' => [
            [
                'page_number' => 1,
                'text' => 'Rapunzel',
                'audio_start' => 0,
                'audio_end' => 1.5
            ],
             [
                'page_number' => 2,
                'text' => 'Once upon a time, there lived a man and his wife.They lived in a house next door to a witch.',
                'audio_start' => 2.5,
                'audio_end' => 8.5
            ],
             [
                'page_number' => 3,
                'text' => 'The wife longed to eat the lettuces in the witch’s beautiful garden.',
                'audio_start' => 9,
                'audio_end' => 14
            ],
             [
                'page_number' => 4,
                'text' => 'One day, the husband decided to steal some of the lettuces for his wife. The witch caught him',
                'audio_start' => 14.5,
                'audio_end' => 20
            ],
             [
                'page_number' => 5,
                'text' => 'The witch told the husband that his wife was soon to have a baby. He must give the baby to the witch in return for the lettuce. The man was so scared that he agreed',
                'audio_start' => 20.5,
                'audio_end' => 32
            ],
             [
                'page_number' => 6,
                'text' => 'When the little girl was born, the witch took her away and named her Rapunzel.',
                'audio_start' => 32.5,
                'audio_end' => 37.5
            ],
             [
                'page_number' => 7,
                'text' => 'When Rapunzel grew up, the witch locked her away in a tower in the middle of the forest. While Rapunzel lived in the tower, her golden hair grew longer and longer.',
                'audio_start' => 38,
                'audio_end' => 48.5
            ],
             [
                'page_number' => 8,
                'text' => 'When the witch visited, she would call to Rapunzel to let down her hair, and the witch would climb up.',
                'audio_start' => 49,
                'audio_end' => 55.8
            ],
             [
                'page_number' => 9,
                'text' => 'One day, a handsome prince found the tower in the forest. He watched the witch come to the tower and climb Rapunzel’s hair.',
                'audio_start' => 56,
                'audio_end' => 67
            ],
             [
                'page_number' => 10,
                'text' => 'When the witch had gone, the prince climbed up the tower using Rapunzel’s hair.',
                'audio_start' => 67.2,
                'audio_end' => 73
            ],
             [
                'page_number' => 11,
                'text' => 'The prince visited Rapunzel every day.When the witch found out, she was angry',
                'audio_start' => 73.5,
                'audio_end' => 79
            ],
             [
                'page_number' => 12,
                'text' => 'The witch made a plan. She cut Rapunzel’s hair and sent her off into the forest',
                'audio_start' => 79.3,
                'audio_end' => 85.3
            ],
             [
                'page_number' => 13,
                'text' => 'The witch tricked the prince and threw him out of the tower.',
                'audio_start' => 85.5,
                'audio_end' => 89
            ],
             [
                'page_number' => 14,
                'text' => 'The prince fell on some thorns and scratched his eyes, which made him blind. For a long time, he wandered in the forest',
                'audio_start' => 89.2,
                'audio_end' => 99
            ],
             [
                'page_number' => 15,
                'text' => 'One day, the prince heard Rapunzel singing in the forest.',
                'audio_start' => 99.2,
                'audio_end' => 103
            ],
             [
                'page_number' => 16,
                'text' => 'When she saw it was her prince, she cried with happiness.Her tears touched his eyes and he could see again.',
                'audio_start' => 103.5,
                'audio_end' => 109.8
            ],
             [
                'page_number' => 17,
                'text' => 'They lived happily ever after in his kingdom.',
                'audio_start' => 109.9,
                'audio_end' => 113
            ],
        ]
    ], 
    'turtle_and_rabbit' => [
        'id' => 'turtle_and_rabbit',
        'title' => 'Turtle_And_Rabbit',
        'description' => 'The story about the turtle and the rabbit tells how steady effort wins over overconfidence.',
        'age_group' => '5',
        'cover_image' => 'storybook/turtle_and_rabbit/cover8.jpeg',
        'pdf_file' => 'storybook/turtle_and_rabbit/storyT.pdf',
        'audio_file' => 'storybook/turtle_and_rabbit/audio8.mp3',
        'total_pages' => 11,
        'pages' => [
              [
                'page_number' => 1,
                'text' => 'turtle_and_rabbit',
                'audio_start' => 0,
                'audio_end' => 1.9
            ],
            [
                'page_number' => 2,
                'text' => 'Of all the animals who lived in the classroom, Rabbit was the most famous for his incredible speed. Although everyone knew he was the fastest animal, he took every chance to brag and show off his talent. Some animals admired him, but others, like Turtle, were annoyed by his boastfulness.',
                'audio_start' => 2,
                'audio_end' => 19.9
            ],
              [
                'page_number' => 3,
                'text' => 'One day, Rabbit was bragging to Turtle about how fast he was. Turtle snapped at him, "If you are so fast, let me see you prove it. I challenge you to a race!" Rabbit laughed, "What a joke! A turtle and a rabbit racing! I accept your challenge. This will be an easy race to win. I can outrun you in my sleep".',
                'audio_start' => 20,
                'audio_end' => 40.4
            ],
              [
                'page_number' => 4,
                'text' => 'Rabbit immediately ran around the school field,announcing the competition. All the animals who lived near the school gathered together to watch the race.What is turtle thinking Blue bird asked deer. she will never win a race against rabbit! I dont know, replied deer but i hope turtle has a plan to win. I am tired of always hearing rabbit boast about his speed ',
                'audio_start' => 40.5,
                'audio_end' => 66
            ],
              [
                'page_number' => 5,
                'text' => 'The animals chose a start and finish line. "Ready, set, go!" yelled Fox. The other animals watched and cheered. Rabbit sprung from the starting line with his incredible speed. Turtle crawled slowly in the same direction. Soon, Rabbit was out of sight, and Turtle was far behind him.',
                'audio_start' => 66.2,
                'audio_end' => 84.3
            ],
              [
                'page_number' => 6,
                'text' => 'In no time, Rabbit was halfway through the course. With Turtle nowhere in sight, he stopped. He thought to himself, "I have plenty of time to win. I will rest and watch the game". Rabbit found a shady spot under a tree, and soon he closed his eyes and fell asleep. ',
                'audio_start' => 84.4,
                'audio_end' => 102
            ],
              [
                'page_number' => 7,
                'text' => 'Meanwhile, Turtle plodded steadily at her slow pace. She put one foot in front of the other, again and again, never stopping. Before long, she passed the sleeping Rabbit. She did not stop, and continued to push herself towards the finish line',
                'audio_start' => 102.3,
                'audio_end' => 119.7
            ],
              [
                'page_number' => 8,
                'text' => 'A little while later, Rabbit woke up from his nap. He looked around and he did not see Turtle."Ha!" he exclaimed, "I took a nap, and Turtle still has not caught up to me". He dashed off again, but as he came around the corner, much to his amazement.',
                'audio_start' => 119.8,
                'audio_end' => 138
            ],
              [
                'page_number' => 9,
                'text' => 'Turtle was crossing the finish line, and all the animals were cheering her on! Rabbit yelled "NO! It just cant be. My eyes must be fooling me!" But Rabbit was the foolish one.',
                'audio_start' => 138.2,
                'audio_end' => 149.8
            ],
              [
                'page_number' => 10,
                'text' => 'The animals clapped and cheered for Turtle. Rabbit could not believe that he lost to the slowest animal in the forest. "Slow and steady wins the race!" cheered the other animals."I learned an important lesson today, congratulations Turtle!" smiled Rabbit.',
                'audio_start' => 149.9,
                'audio_end' => 165.5
            ],
              [
                'page_number' => 11,
                'text' => 'The next day, when it was Kims turn to feed the classroom pets, something was different.',
                'audio_start' => 165.6,
                'audio_end' => 172
            ],
        ]
    ], 
    'the_little_red_riding_hood' => [
        'id' => 'the_little_red_riding_hood',
        'title' => 'The_Little_Red_Riding_Hood',
        'description' => 'The story about Little Red Riding Hood tells how a clever wolf tries to trick a little girl but is finally stopped',
        'age_group' => '5',
        'cover_image' => 'storybook/the_little_red_riding_hood/cover9.jpeg',
        'pdf_file' => 'storybook/the_little_red_riding_hood/story9.pdf',
        'audio_file' => 'storybook/the_little_red_riding_hood/audio9.mp3',
        'total_pages' => 12,
        'pages' => [
              [
                'page_number' => 1,
                'text' => 'Little Red Riding Hood',
                'audio_start' => 0,
                'audio_end' => 1.5
            ],
             [
                'page_number' => 2,
                'text' => 'Once upon a time there was a girl called Little Red Riding Hood.She lived with her mother in a village near a forest.',
                'audio_start' => 2,
                'audio_end' => 7.8
            ],
             [
                'page_number' => 3,
                'text' => 'One day, Little Red Riding Hood went to visit her grandmother. She took a basket of food with her.',
                'audio_start' => 7.9,
                'audio_end' => 13.7
            ],
             [
                'page_number' => 4,
                'text' => 'On her way, Little Red Riding Hood met a wolf. "Hello," said the wolf. "Where are you going?"Im going to visit my grandmother who lives in the forest," explained Little Red Riding Hood. ',
                'audio_start' => 13.8,
                'audio_end' => 25.5
            ],
             [
                'page_number' => 5,
                'text' => 'The wolf ran to her grandmothers house. He went inside and locked her in the wardrobe!He put on her nightgown and got into her bed.',
                'audio_start' => 25.7,
                'audio_end' => 33.4
            ],
             [
                'page_number' => 6,
                'text' => 'A little later, Little Red Riding Hood came to the house.She knocked on the door, then went inside.',
                'audio_start' => 33.5,
                'audio_end' => 40.4
            ],
             [
                'page_number' => 7,
                'text' => 'Little Red Riding Hood went over to Grandmothers bed. "Oh Granny, what big ears you have," she said."All the better to hear you with,answered the wolf.',
                'audio_start' => 40.5,
                'audio_end' => 50.8
            ],
             [
                'page_number' => 8,
                'text' => '"Oh Granny, what big eyes you have," said Little Red Riding Hood."All the better to see you with," replied the wolf.',
                'audio_start' => 50.9,
                'audio_end' => 58
            ],
             [
                'page_number' => 9,
                'text' => '"Oh Granny, what big teeth you have," said Little Red Riding Hood."All the better to eat you with," said the wolf.',
                'audio_start' => 58.5,
                'audio_end' => 66
            ],
             [
                'page_number' => 10,
                'text' => '"Help!" shouted Little Red Riding Hood as she realised that there was a wolf in her grandmothers bed.She ran out of the house.  ',
                'audio_start' => 66.5,
                'audio_end' => 74.3
            ],
             [
                'page_number' => 11,
                'text' => 'A woodcutter was nearby. He heard Little Red Riding Hoods scream and ran to the house.',
                'audio_start' => 74.5,
                'audio_end' => 80
            ],
             [
                'page_number' => 12,
                'text' => 'The woodcutter hit the wolf over the head. The wolf ran away and Little Red Riding Hood never saw him again.',
                'audio_start' => 80.1,
                'audio_end' => 86.5
            ],
        ]
    ],      
];

/**
 * Get all stories
 * @return array All stories
 */
function getAllStories() {
    global $stories;
    return $stories;
}

/**
 * Get story by ID
 * @param string $storyId Story ID
 * @return array|null Story data or null if not found
 */
function getStoryById($storyId) {
    global $stories;
    return isset($stories[$storyId]) ? $stories[$storyId] : null;
}

/**
 * Get stories by age group
 * @param string $ageGroup Age group (toddler, preschool, early_reader, independent_reader)
 * @return array Stories for the age group
 */
function getStoriesByAgeGroup($ageGroup) {
    global $stories;
    $filteredStories = [];
    
    foreach ($stories as $story) {
        if ($story['age_group'] === $ageGroup) {
            $filteredStories[] = $story;
        }
    }
    
    return $filteredStories;
}

/**
 * Get story page image path
 * @param string $storyId Story ID
 * @param int $pageNumber Page number (1-based)
 * @return string Image path
 */
function getStoryPageImage($storyId, $pageNumber) {
    $pageNumber = str_pad($pageNumber, 2, '0', STR_PAD_LEFT);
    return "storybook/{$storyId}/pages/page_{$pageNumber}.jpg";
}

/**
 * Check if story files exist
 * @param string $storyId Story ID
 * @return array Status of story files
 */
function checkStoryFiles($storyId) {
    $story = getStoryById($storyId);
    if (!$story) {
        return ['exists' => false, 'message' => 'Story not found'];
    }
    
    $files = [
        'cover' => file_exists($story['cover_image']),
        'pdf' => file_exists($story['pdf_file']),
        'audio' => file_exists($story['audio_file'])
    ];
    
    // Check if pages directory exists and has images
    $pagesDir = "storybook/{$storyId}/pages/";
    $pagesExist = file_exists($pagesDir);
    $pageImages = [];
    
    if ($pagesExist) {
        for ($i = 1; $i <= $story['total_pages']; $i++) {
            $pageImage = getStoryPageImage($storyId, $i);
            $pageImages[] = file_exists($pageImage);
        }
    }
    
    $files['pages'] = $pagesExist && !in_array(false, $pageImages);
    
    $allFilesExist = !in_array(false, $files);
    
    return [
        'exists' => $allFilesExist,
        'files' => $files,
        'message' => $allFilesExist ? 'All files exist' : 'Some files are missing'
    ];
}

/**
 * Get age group display name
 * @param string $ageGroup Age group code
 * @return string Display name
 */
function getAgeGroupDisplayName($ageGroup) {
    $ageGroups = [
        '2-3' => 'Ages 2-3',
        '4' => 'Age 4',
        '5' => 'Age 5',
    ];
    return isset($ageGroups[$ageGroup]) ? $ageGroups[$ageGroup] : $ageGroup;
}

/**
 * Normalize age to group label '2-3' | '4' | '5'
 */
function normalizeAgeToGroup($age) {
    if (is_string($age)) {
        $age = trim($age);
        if ($age === '2-3') return '2-3';
        if ($age === '4') return '4';
        if ($age === '5') return '5';
    }
    if (is_numeric($age)) {
        $n = (int)$age;
        if ($n <= 3) return '2-3';
        if ($n === 4) return '4';
        if ($n === 5) return '5';
    }
    return '2-3';
}
?>